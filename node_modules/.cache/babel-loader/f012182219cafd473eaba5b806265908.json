{"ast":null,"code":"var _jsxFileName = \"/home/user/Projects/trybe/sd-06-project-frontend-online-store/src/components/AddCartButton.jsx\";\nimport React from 'react';\n\nclass AddCartButton extends React.Component {\n  constructor() {\n    super();\n    this.localStorageSave = this.localStorageSave.bind(this);\n    this.changeItem = this.changeItem.bind(this);\n    this.removeItem = this.removeItem.bind(this);\n  }\n\n  getLocalStorageProduct() {\n    return JSON.parse(localStorage.getItem('cart'));\n  }\n\n  countLocalStorage(cartLocalStorage, id) {\n    const newLocalStorage = cartLocalStorage.map(item => {\n      if (item.id === id) item.qtd += 1;\n      return item;\n    });\n    return newLocalStorage;\n  }\n\n  localStorageSave() {\n    const {\n      data\n    } = this.props;\n    data.qtd = 1;\n    const cartLocalStorage = this.getLocalStorageProduct();\n    let newLocalStorage;\n\n    if (cartLocalStorage) {\n      cartLocalStorage.some(item => item.id === data.id) ? newLocalStorage = this.countLocalStorage(cartLocalStorage, data.id) : newLocalStorage = [...cartLocalStorage, data];\n    } else {\n      newLocalStorage = [data];\n    }\n\n    const stringData = JSON.stringify(newLocalStorage);\n    localStorage.setItem('cart', stringData);\n    console.log('Produto adicionado ao carrinho com sucesso!');\n  }\n\n  localStorageRemove() {\n    console.log('Remove item');\n  }\n\n  btHome() {\n    const {\n      bt\n    } = this.props;\n    let testid;\n    if (bt === 'home') testid = 'product-add-to-cart';\n    if (bt === 'productDetails') testid = 'product-detail-add-to-cart';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"cart-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": testid,\n      type: \"button\",\n      onClick: this.localStorageSave,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }, \"Adicionar ao Carrinho de Compras\"));\n  }\n\n  changeItem(id, event, op) {\n    let delId;\n    const cartItems = this.getLocalStorageProduct();\n    const newCartItems = cartItems.map(item => {\n      if (item.id === id) {\n        op === \"plus\" ? item.qtd += 1 : item.qtd -= 1;\n        op === \"plus\" ? event.target.previousSibling.lastChild.innerText = item.qtd : event.target.previousSibling.previousSibling.lastChild.innerText = item.qtd;\n        if (item.qtd === 0) delId = id;\n        return item;\n      }\n\n      return item;\n    });\n    localStorage.cart = JSON.stringify(newCartItems);\n    if (delId) this.removeItem(id);\n  }\n\n  removeItem(id, event) {\n    const cartItems = this.getLocalStorageProduct();\n    const newCartItems = cartItems.filter(item => item.id !== id);\n    const item = event.target.parentNode.parentNode.parentNode;\n    item.parentNode.removeChild(item);\n    localStorage.cart = JSON.stringify(newCartItems);\n  }\n\n  btRemove() {\n    const {\n      data\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"cart-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, \"Quantidade:\", /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"shopping-cart-product-quantity\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, data.qtd)), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"product-add-to-cart\",\n      type: \"button\",\n      onClick: event => this.changeItem(data.id, event, \"plus\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, \"+\"), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"product-add-to-cart\",\n      type: \"button\",\n      onClick: event => this.changeItem(data.id, event, \"test\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, \"-\"), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"product-add-to-cart\",\n      type: \"button\",\n      onClick: event => this.removeItem(data.id, event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }, \"Remover\"));\n  }\n\n  render() {\n    const {\n      bt\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, bt === 'cart' ? this.btRemove() : this.btHome());\n  }\n\n}\n\nexport default AddCartButton;","map":{"version":3,"sources":["/home/user/Projects/trybe/sd-06-project-frontend-online-store/src/components/AddCartButton.jsx"],"names":["React","AddCartButton","Component","constructor","localStorageSave","bind","changeItem","removeItem","getLocalStorageProduct","JSON","parse","localStorage","getItem","countLocalStorage","cartLocalStorage","id","newLocalStorage","map","item","qtd","data","props","some","stringData","stringify","setItem","console","log","localStorageRemove","btHome","bt","testid","event","op","delId","cartItems","newCartItems","target","previousSibling","lastChild","innerText","cart","filter","parentNode","removeChild","btRemove","render"],"mappings":"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","sourcesContent":["import React from 'react';\n\nclass AddCartButton extends React.Component {\n  constructor() {\n    super();\n    this.localStorageSave = this.localStorageSave.bind(this);\n    this.changeItem = this.changeItem.bind(this);\n    this.removeItem = this.removeItem.bind(this);\n  }\n\n  getLocalStorageProduct() {\n    return JSON.parse(localStorage.getItem('cart'));\n  }\n\n  countLocalStorage(cartLocalStorage, id) {\n    const newLocalStorage = cartLocalStorage.map((item) => {\n      if (item.id === id) item.qtd += 1;\n      return item;\n    });\n    return newLocalStorage;\n  }\n\n  localStorageSave() {\n    const { data } = this.props;\n    data.qtd = 1;\n    const cartLocalStorage = this.getLocalStorageProduct();\n    let newLocalStorage;\n    if (cartLocalStorage) {\n      (cartLocalStorage.some((item) => item.id === data.id))\n        ? newLocalStorage = this.countLocalStorage(cartLocalStorage, data.id)\n        : newLocalStorage = [...cartLocalStorage, data];\n    } else {\n      newLocalStorage = [data];\n    }\n    const stringData = JSON.stringify(newLocalStorage);\n    localStorage.setItem('cart', stringData);\n    console.log('Produto adicionado ao carrinho com sucesso!');\n  }\n\n  localStorageRemove() {\n    console.log('Remove item');\n  }\n\n  btHome() {\n    const { bt } = this.props;\n    let testid;\n    if (bt === 'home') testid = 'product-add-to-cart';\n    if (bt === 'productDetails') testid = 'product-detail-add-to-cart';\n\n    return (\n      <div id=\"cart-button\">\n        <button data-testid={ testid } type=\"button\" onClick={ this.localStorageSave }>\n          Adicionar ao Carrinho de Compras\n        </button>\n      </div>\n    );\n  }\n  changeItem(id , event, op) {\n    let delId;\n    const cartItems = this.getLocalStorageProduct();\n    const newCartItems = cartItems.map(item => {\n     if (item.id === id) {\n      (op === \"plus\") ? item.qtd += 1 : item.qtd -= 1;\n      (op === \"plus\") \n        ? event.target.previousSibling.lastChild.innerText = item.qtd\n        : event.target.previousSibling.previousSibling.lastChild.innerText = item.qtd;\n        if (item.qtd === 0) delId = id;\n      return item;\n     }\n     return item;\n  })\n   localStorage.cart = JSON.stringify(newCartItems);\n   if (delId) this.removeItem(id);\n  }\n  \n  removeItem(id, event) {\n    const cartItems = this.getLocalStorageProduct();\n    const newCartItems = cartItems.filter(item => item.id !== id);\n    const item = event.target.parentNode.parentNode.parentNode;\n    item.parentNode.removeChild(item);\n    localStorage.cart = JSON.stringify(newCartItems);\n  }\n\n  btRemove() {\n    const { data } = this.props;\n    return (\n      <div id=\"cart-button\">\n\n        <div>\n          Quantidade:\n          <div data-testid=\"shopping-cart-product-quantity\"> \n            {data.qtd}\n          </div>\n         \n        </div>\n        <button data-testid=\"product-add-to-cart\" type=\"button\" onClick={ (event) => this.changeItem(data.id, event, \"plus\") }>\n          +\n        </button>\n        <button data-testid=\"product-add-to-cart\" type=\"button\" onClick={ (event) => this.changeItem(data.id, event, \"test\") }>\n          -\n        </button>\n        <button data-testid=\"product-add-to-cart\" type=\"button\" onClick={ (event) => this.removeItem(data.id, event) }>\n          Remover\n        </button>\n      </div>\n    );\n  }\n\n  render() {\n    const { bt } = this.props;\n    return (\n      <div>\n        {(bt === 'cart') ? this.btRemove() : this.btHome()}\n      </div>\n    );\n  }\n}\n\nexport default AddCartButton;\n"]},"metadata":{},"sourceType":"module"}